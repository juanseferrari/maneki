<!-- Dashboard Section (Main) -->
<section id="section-dashboards" class="content-section active">
  <div class="section-header">
    <h1>Dashboard</h1>
    <p>Visualiza y analiza tus datos financieros</p>
  </div>

  <!-- Filters Section -->
  <div class="dashboard-filters">
    <div class="filters-row">
      <div class="filter-group">
        <label for="dashboard-date-from">Desde</label>
        <input type="date" id="dashboard-date-from" class="filter-input">
      </div>
      <div class="filter-group">
        <label for="dashboard-date-to">Hasta</label>
        <input type="date" id="dashboard-date-to" class="filter-input">
      </div>
      <div class="filter-group">
        <label for="dashboard-type">Tipo</label>
        <select id="dashboard-type" class="filter-select">
          <option value="all">Todos</option>
          <option value="income">Ingresos</option>
          <option value="expense">Egresos</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="dashboard-period">Periodicidad</label>
        <select id="dashboard-period" class="filter-select">
          <option value="daily">Diario</option>
          <option value="weekly">Semanal</option>
          <option value="monthly" selected>Mensual</option>
        </select>
      </div>
      <div class="filter-group filter-actions">
        <button id="apply-dashboard-filters" class="btn-primary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
          </svg>
          Aplicar
        </button>
      </div>
    </div>
  </div>

  <!-- Summary Cards -->
  <div class="dashboard-summary">
    <div class="summary-card income">
      <div class="summary-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="19" x2="12" y2="5"></line>
          <polyline points="5 12 12 5 19 12"></polyline>
        </svg>
      </div>
      <div class="summary-content">
        <div class="summary-label">Total Ingresos</div>
        <div class="summary-value" id="total-income">$0.00</div>
      </div>
    </div>
    <div class="summary-card expense">
      <div class="summary-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <polyline points="19 12 12 19 5 12"></polyline>
        </svg>
      </div>
      <div class="summary-content">
        <div class="summary-label">Total Egresos</div>
        <div class="summary-value" id="total-expense">$0.00</div>
      </div>
    </div>
    <div class="summary-card balance">
      <div class="summary-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="1" x2="12" y2="23"></line>
          <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
        </svg>
      </div>
      <div class="summary-content">
        <div class="summary-label">Balance Neto</div>
        <div class="summary-value" id="net-balance">$0.00</div>
      </div>
    </div>
    <div class="summary-card count">
      <div class="summary-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
        </svg>
      </div>
      <div class="summary-content">
        <div class="summary-label">Transacciones</div>
        <div class="summary-value" id="transaction-count">0</div>
      </div>
    </div>
  </div>

  <!-- Main Chart -->
  <div class="dashboard-chart-container">
    <div class="chart-header">
      <h3>Movimientos por Periodo</h3>
      <div class="chart-legend" id="chart-legend"></div>
    </div>
    <div class="chart-wrapper">
      <canvas id="sales-chart"></canvas>
    </div>
    <div class="chart-loading" id="chart-loading" style="display: none;">
      <div class="spinner"></div>
      <span>Cargando datos...</span>
    </div>
    <div class="chart-empty" id="chart-empty" style="display: none;">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="3" y1="9" x2="21" y2="9"></line>
        <line x1="9" y1="21" x2="9" y2="9"></line>
      </svg>
      <p>No hay datos para mostrar</p>
      <span>Ajusta los filtros o sube mas transacciones</span>
    </div>
  </div>

  <!-- Category Detail Table (always shown) -->
  <div class="dashboard-grouped-data" id="grouped-data-container">
    <div class="grouped-data-header">
      <h3>Detalle por Categoría</h3>
    </div>
    <div class="grouped-data-table-wrapper">
      <table class="grouped-data-table">
        <thead>
          <tr>
            <th>Descripcion</th>
            <th>Cantidad</th>
            <th>Total</th>
            <th>Promedio</th>
          </tr>
        </thead>
        <tbody id="grouped-data-body">
        </tbody>
      </table>
    </div>
  </div>

  <!-- Categories by Month Table -->
  <div class="dashboard-grouped-data" id="categories-by-month-container" style="display: none;">
    <div class="grouped-data-header">
      <h3>Categorías por Mes (Últimos 6 Meses)</h3>
    </div>
    <div class="grouped-data-table-wrapper">
      <table class="grouped-data-table categories-month-table">
        <thead id="categories-month-header">
          <!-- Headers will be generated dynamically -->
        </thead>
        <tbody id="categories-month-body">
          <!-- Rows will be generated dynamically -->
        </tbody>
      </table>
    </div>
  </div>
</section>
